PORT=3000
BASE_URL=http://localhost:3000
OUTPUT_DIR=generated

# Upstream Gemini config
GEMINI_MODEL=gemini-2.0-flash-exp-image-generation
UPSTREAM_GEMINI_BASE_URL=https://generativelanguage.googleapis.com
UPSTREAM_GEMINI_API_VERSION=v1beta
UPSTREAM_GEMINI_API_KEY=YOUR_UPSTREAM_GEMINI_API_KEY
UPSTREAM_GEMINI_MODEL=gemini-2.0-flash-exp-image-generation
# Optional full custom upstream URL. If set, this has highest priority.
# Supported placeholders: {model} {api_version} {api_key}
# Example:
# UPSTREAM_GEMINI_URL=https://generativelanguage.googleapis.com/v1beta/models/{model}:generateContent?key={api_key}
UPSTREAM_GEMINI_URL=

# Backward compatibility only (optional)
GEMINI_API_KEY=
GEMINI_MODEL=

# API auth for this proxy (downstream callers -> this service)
REQUIRE_SERVICE_API_KEY=true
SERVICE_API_KEY=CHANGE_ME_TO_A_STRONG_KEY

# Global style-reference settings
# true: send style reference image to Gemini
# false: do not send style reference image
ENABLE_STYLE_REFERENCE=false

# Optional URL mode (higher priority than STYLE_REFERENCE_IMAGE_PATH):
# service downloads this image and caches it locally before using it.
STYLE_REFERENCE_IMAGE_URL=

# Relative path from project root or absolute path
STYLE_REFERENCE_IMAGE_PATH=assets/style-reference.png

# Local cache dir for downloaded STYLE_REFERENCE_IMAGE_URL
STYLE_REFERENCE_CACHE_DIR=style-reference-cache

# true: re-download STYLE_REFERENCE_IMAGE_URL on every request
STYLE_REFERENCE_REFRESH_ON_EACH_REQUEST=false

# Download timeout in milliseconds
STYLE_REFERENCE_DOWNLOAD_TIMEOUT_MS=15000

# Optional. If empty, infer from file extension (.png/.jpg/.jpeg/.webp)
STYLE_REFERENCE_MIME_TYPE=

# true: append style-only instruction to prompt tail
APPEND_STYLE_REFERENCE_NOTICE=true

# Must clearly indicate style-only reference (NOT identity/person reference)
STYLE_REFERENCE_NOTICE=The reference image is STYLE-ONLY and NOT a person/identity reference. Use it only for palette, lighting, brushwork, composition, and mood. Do not copy face, identity, body, age, gender, or character-specific traits.
